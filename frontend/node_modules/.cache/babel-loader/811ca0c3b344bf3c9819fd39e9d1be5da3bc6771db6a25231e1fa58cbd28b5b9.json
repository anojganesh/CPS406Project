{"ast":null,"code":"import\"./styles/member.css\";import{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Member=props=>{const[latefee,setLatefee]=useState(0);const[tableStr,setTableStr]=useState(\"\");const[tableStr2,setTableStr2]=useState(\"\");const location=useLocation();const{username,fullname}=location.state||{};const{_username,_fullname}=props;useEffect(()=>{const fetchDataAndBuildTable=async()=>{try{console.log(\"called 1 time\");const response=await fetch(\"/getpayments\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({fullname:fullname})});const data=await response.json();console.log(\"response received\");if(data.payments&&data.payments.length>0){let latefee=data.payments[0].latefee;setLatefee(latefee);let tempTableStr=\"\";data.payments.forEach(payment=>{let name=payment.fullname;let amount=payment.amount;let date=payment.date;let title=\"\";if(amount!=0){if(amount!=0){if(amount==10){title=\" - Session Payment\";}else if(amount==40){title=\" - Monthly payment\";}tempTableStr+=\"\\n                  <tr>\\n                    <td>\".concat(name).concat(title,\"</td>\\n                    <td>\").concat(date,\"</td>\\n                    <td>$\").concat(amount,\"</td>\\n                  </tr>\\n                \");}}});setTableStr(tempTableStr);}else{console.log(\"No payments data received\");}const response2=await fetch(\"/getattendance\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({fullname:fullname})});const data2=await response2.json();console.log(\"attendance response received\");console.log(data2);if(data2&&data2.payments&&data2.payments.length>0){let name2=data2.payments[0].fullname;let tempTableStr2=\"\";data2.payments.forEach(payment=>{tempTableStr2+=\"\\n              <tr>\\n                <td>\".concat(name2,\"</td>\\n                <td>\").concat(payment.date,\"</td>\\n              </tr>\\n            \");});setTableStr2(tempTableStr2);}else{console.log(\"No attendance data received\");}}catch(error){console.error(\"Error:\",error);}};fetchDataAndBuildTable();},[fullname]);return/*#__PURE__*/_jsx(\"div\",{className:\"mainContainer\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-side\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-item\",id:\"leftItem1\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",fullname]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Club Member\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"User ID: \",username]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Your Bill: $10/Session\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Late Fees ($20 per unpaid bill):\",\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:latefee>0?\"red\":\"black\"},children:[\"$\",latefee]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"warning\",children:\"*Failure to pay late fees will result in an indefinite suspension from all club activities.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"left-item2\",id:\"leftItem2\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment History\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"})]})}),tableStr&&/*#__PURE__*/_jsx(\"tbody\",{dangerouslySetInnerHTML:{__html:tableStr}})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right-side\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"right-item\",id:\"rightItem\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Attendance History\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{dangerouslySetInnerHTML:{__html:tableStr2}})]})]})})]})})});};export default Member;","map":{"version":3,"names":["useEffect","useState","useLocation","jsxs","_jsxs","jsx","_jsx","Member","props","latefee","setLatefee","tableStr","setTableStr","tableStr2","setTableStr2","location","username","fullname","state","_username","_fullname","fetchDataAndBuildTable","console","log","response","fetch","method","headers","body","JSON","stringify","data","json","payments","length","tempTableStr","forEach","payment","name","amount","date","title","concat","response2","data2","name2","tempTableStr2","error","className","children","id","style","color","dangerouslySetInnerHTML","__html"],"sources":["C:/Users/sujee/OneDrive/Documents/CPS406Project-main (1)/CPS406Project-main/frontend/src/member.js"],"sourcesContent":["import \"./styles/member.css\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst Member = (props) => {\r\n  const [latefee, setLatefee] = useState(0);\r\n  const [tableStr, setTableStr] = useState(\"\");\r\n  const [tableStr2, setTableStr2] = useState(\"\");\r\n  const location = useLocation();\r\n  const { username, fullname } = location.state || {};\r\n  const { _username, _fullname } = props;\r\n\r\n  useEffect(() => {\r\n    const fetchDataAndBuildTable = async () => {\r\n      try {\r\n        console.log(\"called 1 time\");\r\n        const response = await fetch(\"/getpayments\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ fullname: fullname }),\r\n        });\r\n        const data = await response.json();\r\n        console.log(\"response received\");\r\n\r\n        if (data.payments && data.payments.length > 0) {\r\n          let latefee = data.payments[0].latefee;\r\n          setLatefee(latefee);\r\n\r\n          let tempTableStr = \"\";\r\n\r\n          data.payments.forEach((payment) => {\r\n            let name = payment.fullname;\r\n            let amount = payment.amount;\r\n            let date = payment.date;\r\n            let title = \"\";\r\n            if (amount != 0) {\r\n              if (amount != 0) {\r\n                if (amount == 10) {\r\n                  title = \" - Session Payment\";\r\n                } else if (amount == 40) {\r\n                  title = \" - Monthly payment\";\r\n                }\r\n                tempTableStr += `\r\n                  <tr>\r\n                    <td>${name}${title}</td>\r\n                    <td>${date}</td>\r\n                    <td>$${amount}</td>\r\n                  </tr>\r\n                `;\r\n              }\r\n            }\r\n          });\r\n\r\n          setTableStr(tempTableStr);\r\n        } else {\r\n          console.log(\"No payments data received\");\r\n        }\r\n        const response2 = await fetch(\"/getattendance\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ fullname: fullname }),\r\n        });\r\n        const data2 = await response2.json();\r\n        console.log(\"attendance response received\");\r\n        console.log(data2);\r\n        if (data2 && data2.payments && data2.payments.length > 0) {\r\n          let name2 = data2.payments[0].fullname;\r\n          let tempTableStr2 = \"\";\r\n\r\n          data2.payments.forEach((payment) => {\r\n            tempTableStr2 += `\r\n              <tr>\r\n                <td>${name2}</td>\r\n                <td>${payment.date}</td>\r\n              </tr>\r\n            `;\r\n          });\r\n\r\n          setTableStr2(tempTableStr2);\r\n        } else {\r\n          console.log(\"No attendance data received\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error:\", error);\r\n      }\r\n    };\r\n\r\n    fetchDataAndBuildTable();\r\n  }, [fullname]);\r\n\r\n  return (\r\n    <div className=\"mainContainer\">\r\n      <div>\r\n        <div className=\"dashboard\">\r\n          <div className=\"left-side\">\r\n            <div className=\"left-item\" id=\"leftItem1\">\r\n              <h1>Welcome, {fullname}</h1>\r\n              <h2>Club Member</h2>\r\n              <h3>User ID: {username}</h3>\r\n              <h3>Your Bill: $10/Session</h3>\r\n              <h3>\r\n                Late Fees ($20 per unpaid bill):{\" \"}\r\n                <span style={{ color: latefee > 0 ? \"red\" : \"black\" }}>\r\n                  ${latefee}\r\n                </span>\r\n              </h3>\r\n              <span className=\"warning\">\r\n                *Failure to pay late fees will result in an indefinite\r\n                suspension from all club activities.\r\n              </span>\r\n            </div>\r\n            <div className=\"left-item2\" id=\"leftItem2\">\r\n              <h2>Payment History</h2>\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Name</th>\r\n                    <th>Date</th>\r\n                    <th>Amount</th>\r\n                  </tr>\r\n                </thead>\r\n                {tableStr && (\r\n                  <tbody dangerouslySetInnerHTML={{ __html: tableStr }}></tbody>\r\n                )}\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div className=\"right-side\">\r\n            <div className=\"right-item\" id=\"rightItem\">\r\n              <h2>Attendance History</h2>\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Name</th>\r\n                    <th>Date</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody dangerouslySetInnerHTML={{ __html: tableStr2 }}></tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Member;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}